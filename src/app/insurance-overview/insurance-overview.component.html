<app-nav-bar></app-nav-bar>

<nav class=" bg-light fixed-top " style="margin-top: 70px; padding-top: 10px">
    <div class="container ">
        <div class="row  align-items-center">
            <div class="col-lg-7">
                <h5 style = "font-size: 35px" class="display-4 text-black mt-2 mb-6">{{clientName}}'s Insurance List</h5>
            </div>
            <div class="col-lg-3">
                <mat-form-field>
                    <mat-label>Budget</mat-label>
                    <input matInput type="number" placeholder="Budget" [(ngModel)]="budget">
                </mat-form-field>
                <br>
            </div>
            <div class="col-lg-2">
                <button style="background-color: white" mat-button color="primary" (click)="calculateInsurance()">
                    Calculate
                </button>
            </div>
        </div>
    </div>
</nav>

<br>
<br>
<br>
<div class="container">
    <br>
    <div class = "row">
        <div class = "col-lg-8">
            <div class="row">
                <div class="col-md-6" *ngFor="let insuranceItem of insuranceItemsValueChanges | async">
                    <div>
                        <br>
                        <mat-card class="exmaple-card">
                            <mat-card-header>
                                <mat-card-title
                                    style="font-weight:bold; font-size:24px">{{insuranceItem['payload'].val()['name']}}</mat-card-title>
                            </mat-card-header>
                            <mat-card-content>
                                <p>
                                    {{insuranceItem['payload'].val()['description']}}
                                </p>
                            </mat-card-content>
                            <mat-form-field>
                                <mat-label>Cost</mat-label>
                                <input matInput #cost type="number" value="{{insuranceItem['payload'].val()['cost']}}"></mat-form-field><br>
                            <mat-form-field>
                                <mat-label>Importance</mat-label>
                                <input matInput #importance type="number" value="{{insuranceItem['payload'].val()['importance']}}"></mat-form-field><br>
                            <mat-card-actions>
                                <button style = "background-color: white" mat-button color = "primary" (click)="onUpdateInsuranceItemSubmit(insuranceItem, importance, cost)">Update</button>
                                <button style = "background-color: white" mat-button color = "primary" (click)="onRemoveInsuranceItemSubmit(insuranceItem)">Remove</button>
                            </mat-card-actions>

                        </mat-card>

                    </div>


                </div>
                <div class="col-md-6">
                    <h4>Add new item</h4>
                    <mat-form-field><input type="text" matInput placeholder="Item" [(ngModel)]="newName"></mat-form-field>
                    <br>
                    <mat-form-field><input type="number" matInput placeholder="Cost" [(ngModel)]="newCost"></mat-form-field>
                    <br>
                    <mat-form-field><input type="text" matInput placeholder="Description" [(ngModel)]="newDescription">
                    </mat-form-field>
                    <br>
                    <label>Importance</label><br>
                    <mat-slider min="1" max="100" step="1" thumbLabel></mat-slider>
                    <br>
                    <button style="background-color: white" mat-button color="primary" (click)="onAddInsuranceItemSubmit()">
                        Submit
                    </button>
                </div>

            </div>
        </div>
        <div class = "col-lg-4">
            <div style = "margin-top:25px; padding-top: 20px; padding-left: 10px; padding-bottom: 10px; background-color:whitesmoke ">
                <h4>Chat with an agent</h4>
                <mat-form-field><textarea matInput (keyup.enter)="makeComment()" type="text" placeholder="Comment" [(ngModel)]="newCommentText"></textarea>
                </mat-form-field>

                 <button style = "margin-top: 7px" class = "float-right" mat-button (click)="makeComment()">Send</button>

                <div *ngFor="let comment of commentListChanges | async | orderBy: num : false">
                    <div><strong>{{comment['payload'].val()['name'] }}:</strong> {{comment['payload'].val()['text'] }}</div>
                </div>

            </div>
        </div>
    </div>


</div>




