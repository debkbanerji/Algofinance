<app-nav-bar></app-nav-bar>

<nav class=" bg-light my-5 fixed-top ">
    <div class="container ">
        <div class="row  align-items-center">
            <div class="col-lg-7">
                <h3 class="display-4 text-black mt-2 mb-2">{{clientName}}'s Insurance List</h3>
            </div>
            <div class="col-lg-3">
                <mat-form-field>
                    <mat-label>Budget</mat-label>
                    <input matInput type="number" placeholder="Budget" [(ngModel)]="budget">
                </mat-form-field>
                <br>
            </div>
            <div class="col-lg-2">
                <button style="background-color: white" mat-button color="primary" (click)="calculateInsurance()">
                    Calculate
                </button>
            </div>
        </div>
    </div>
</nav>

<br>
<br>
<br>
<div class="container">
    <br>


    <div class="row">
        <div class="col-md-4" *ngFor="let insuranceItem of insuranceItemsValueChanges | async">
            <div>
                <br>
                <mat-card class="exmaple-card">
                    <mat-card-header>
                        <mat-card-title
                            style="font-weight:bold; font-size:24px">{{insuranceItem['payload'].val()['name']}}</mat-card-title>
                    </mat-card-header>

                    <img mat-card-image style="margin-left: 30px; height:  200px; width: 200px;"
                         src="{{insuranceItem['payload'].val()['url']}}">

                    <mat-card-content>
                        <p>
                            {{insuranceItem['payload'].val()['description']}}
                        </p>
                    </mat-card-content>
                    <mat-card-actions>
                        <button style="background-color: white" mat-button color="primary"
                                (click)="onUpdateInsuranceItemSubmit(insuranceItem, importance, cost)">Update
                        </button>
                        <button style="background-color: white" mat-button color="primary"
                                (click)="onRemoveInsuranceItemSubmit(insuranceItem)">Remove
                        </button>
                    </mat-card-actions>
                </mat-card>

            </div>


        </div>
        <div class="col-md-4">
            <h4>Add new item</h4>
            <mat-form-field><input type="text" matInput placeholder="Item" [(ngModel)]="newName"></mat-form-field>
            <br>
            <mat-form-field><input type="number" matInput placeholder="Cost" [(ngModel)]="newCost"></mat-form-field>
            <br>
            <mat-form-field><input type="text" matInput placeholder="Description" [(ngModel)]="newDescription">
            </mat-form-field>
            <br>
            <label>Importance</label><br>
            <mat-slider min="1" max="100" step="1" thumbLabel></mat-slider>
            <br>
            <button style="background-color: white" mat-button color="primary" (click)="onAddInsuranceItemSubmit()">
                Submit
            </button>
        </div>

    </div>
</div>


<div>
    <h1>CHAT</h1>
    <h2>{{(numCommentsChanges | async)?.payload.val() || 0}}</h2>
    <button (click)="makeComment()">Add comment</button>
    <div *ngFor="let comment of commentListChanges | async | orderBy: num : true">
        <div>{{comment|json}}</div>
    </div>
    <input type="text" placeholder="Comment" [(ngModel)]="newCommentText">
</div>

